# Ingress configuration for web services
ingresses:
  # Main web app ingress
  - enabled: true
    name: web-public-ingress
    host: chat.publicai.co  # Configure your domain
    annotations:
      kubernetes.io/ingress.class: alb-web
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
      alb.ingress.kubernetes.io/ssl-redirect: "443"
      alb.ingress.kubernetes.io/certificate-arn: "{{ .Values.certificateArn }}"
    targetService:
      name: openwebui-service  # Actual service name from OpenWebUI stack
      port: 8080               # Default OpenWebUI port
  
  # LiteLLM API ingress - disabled for now (internal VPC communication only)
  # Enable this when you want to expose LiteLLM as api.publicai.company
  - enabled: true
    name: litellm-public-ingress
    host: api-internal.publicai.co
    annotations:
      kubernetes.io/ingress.class: alb-web
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
      alb.ingress.kubernetes.io/ssl-redirect: "443"
      alb.ingress.kubernetes.io/certificate-arn: "{{ .Values.certificateArn }}"
    targetService:
      name: litellm-service
      port: 4000

  # Lago billing platform frontend ingress (official chart)
  - enabled: true
    name: lago-public-ingress
    host: lago.publicai.co
    annotations:
      kubernetes.io/ingress.class: alb-web
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
      alb.ingress.kubernetes.io/ssl-redirect: "443"
      alb.ingress.kubernetes.io/certificate-arn: "{{ .Values.certificateArn }}"
    targetService:
      name: web-services-front-svc  # Official chart service name
      port: 80

  # Lago billing platform API ingress (official chart)
  - enabled: true
    name: lago-api-ingress
    host: lago-api.publicai.co
    annotations:
      kubernetes.io/ingress.class: alb-web
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
      alb.ingress.kubernetes.io/ssl-redirect: "443"
      alb.ingress.kubernetes.io/certificate-arn: "{{ .Values.certificateArn }}"
    targetService:
      name: web-services-api-svc  # Official chart service name
      port: 3000

# Certificate ARN (passed from command line)
certificateArn: ""