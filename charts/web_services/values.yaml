# Global values for web-services umbrella chart
global:
  # Shared namespace for all services
  namespace: web-services
  
  # AWS configuration
  aws:
    region: eu-central-2
    
  # Ingress now handled by infrastructure chart

# OpenWebUI configuration - only environment-specific overrides
open-webui:
  enabled: true
  
  # Production-specific overrides
  app:
    webuiUrl: "https://chat.publicai.co"
    replicas: 2  
    
    # Production storage configuration
    storage:
      s3:
        bucketName: publicai-bucket
        region: eu-central-2
        keyPrefix: uploads/
        endpointUrl: 	https://s3.eu-central-2.amazonaws.com
    
    # Production resource allocation for 5k concurrent users
    resources:
      requests:
        memory: "1Gi"
        cpu: "500m"
      limits:
        memory: "4Gi"
        cpu: "2000m"

  # Autoscaling for high load
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 70

  serviceAccount:
    roleArn: arn:aws:iam::901779868336:role/OpenWebUI-IRSA-Role

  # Secrets configuration
  secrets:
    name: web-services-secrets
    licenseKey: ""
    webuiSecretKey: ""
    databaseUrl: ""
    redisUrl: ""
    # googleClientId: ""
    # googleClientSecret: ""
    oauthClientId: ""
    oauthClientSecret: ""
    openidProviderUrl: ""
    openidRedirectUri: ""

# SearXNG configuration
searxng:
  enabled: false
  service:
    name: searxng-service
    port: 8080
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi" 
      cpu: "1000m"

# Tika configuration  
tika:
  enabled: true
  service:
    name: tika-service
    port: 9998
  javaOpts: "-Xms2g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=200"
  resources:
    requests:
      memory: "2Gi"      # Reserve less, but enough for normal ops
      cpu: "500m"
    limits:
      memory: "6Gi"      # Keep high for OCR/large PDFs!
      cpu: "2000m"

# LiteLLM configuration
litellm:
  enabled: true
  secrets:
    litellmMasterKey: ""